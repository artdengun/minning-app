{% extends "layouts/index.html" %}

{% block title %} Genetic Algorithm {% endblock %}

{% block content %}
<div class="page-title dark-background">
  <div class="container justify-content-between align-items-center">
    <h1 class="mb-2 mb-lg-0">Genetic Algorithm (GA)</h1>
    <hr>
    <p></p>
    <div class="btn btn-danger d-lg-flex shadow-lg align-items-right">Execute Genetic Algorithm</div>
    <hr>
    <nav class="breadcrumbs">
      <ol>
        <li><a href="/">Home</a></li>
        <li class="current">GA</li>
      </ol>
    </nav>
  </div>
</div><!-- End Page Title -->

<br>
<!-- Portfolio Table -->
<section id="portfolio-table" class="portfolio-table">
  <div class="container-fluid" data-aos="fade-up" data-aos-delay="400">

    <h2>Fitness Curve</h2>
    <img src="data:image/png;base64,{{ fitness_curve_base64 }}" />

    <h2>Route Visualization</h2>
    <img src="data:image/png;base64,{{ route_graph_base64 }}" />

    <h2>Original Table Data</h2>
    <div class="table-responsive">
      <table id="datatable-original" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Distance X</th>
            <th>Distance Y</th>
            <th>Goods Received</th>
            <th>Estimated Time</th>
            <th>Lead Time</th>
          </tr>
        </thead>
        <tbody>
          {% for row in table_data %}
          <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.name }}</td>
            <td>{{ row.distance_x_cm }}</td>
            <td>{{ row.distance_y_cm }}</td>
            <td>{{ row.goods_received_kg }}</td>
            <td>{{ row.estimated_time }}</td>
            <td>{{ row.lead_time }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <h2>Processed Data</h2>
    <div class="table-responsive">
      <table id="datatable-processed" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Total Distance</th>
            <th>Goods Received</th>
            <th>Estimated Time</th>
            <th>Lead Time</th>
          </tr>
        </thead>
        <tbody>
          {% for row in processed_data %}
          <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.name }}</td>
            <td>{{ row.total_distance_cm }}</td>
            <td>{{ row.goods_received_kg }}</td>
            <td>{{ row.estimated_time }}</td>
            <td>{{ row.lead_time }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <h2>Best Route</h2>
    <ul>
      {% for location in best_route %}
      <li>ID: {{ location[0] }}, Name: {{ location[1] }}, Total Distance: {{ location[2] }}</li>
      {% endfor %}
    </ul>

    <h3>Total Best Distance: {{ best_distance }}</h3>
  </div>
</section>

{% endblock %}
